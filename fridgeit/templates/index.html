<!DOCTYPE html>
{% load static %}
<html lang="en">
  <head>
    <meta charset="utf-8">
    <title>Fridgit</title>
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="">
    <meta name="author" content="">

    <!-- Le styles -->
<link href="http://netdna.bootstrapcdn.com/twitter-bootstrap/2.3.0/css/bootstrap-combined.min.css" rel="stylesheet"/>
  
    <style type="text/css">
      body {
        padding-top: 60px;
        padding-bottom: 40px;
      }
      .tooltip-inner {
          max-width: 400px;
          white-space:pre-wrap;
        }
      .navbar-inner {
      background-color: #7171C6;
      font-color: #FFFFFF;
      }
      h4 .btn { display: inline-block; }
    </style>




    <!-- HTML5 shim, for IE6-8 support of HTML5 elements -->
    <!--[if lt IE 9]>
      <script src="../assets/js/html5shiv.js"></script>
    <![endif]-->

    <!-- Fav and touch icons -->
    <link rel="apple-touch-icon-precomposed" sizes="144x144" href="../assets/ico/apple-touch-icon-144-precomposed.png">
    <link rel="apple-touch-icon-precomposed" sizes="114x114" href="../assets/ico/apple-touch-icon-114-precomposed.png">
      <link rel="apple-touch-icon-precomposed" sizes="72x72" href="../assets/ico/apple-touch-icon-72-precomposed.png">
                    <link rel="apple-touch-icon-precomposed" href="../assets/ico/apple-touch-icon-57-precomposed.png">
                                   <link rel="shortcut icon" href="../assets/ico/favicon.png">
  </head>

<body>

  
  <script src="{% static 'bootstrap/js/jquery-1.10.2.min.js' %}"></script>
  <script src="{% static 'bootstrap/js/bootstrap.min.js' %}"></script>
  <div class="navbar navbar-inverse navbar-fixed-top">
      <div class="navbar-inner">
        <div class="container">
          <button type="button" class="btn btn-navbar" data-toggle="collapse" data-target=".nav-collapse">
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
            <span class="icon-bar"></span>
          </button>
          <a class="brand" href= {% url "home" %} >Fridgit</a>
          <div class="nav-collapse collapse">
            <ul class="nav">
            </ul>
            <form class="navbar-form pull-right">
              <!--<a href={% url "login" %} class="btn">Sign in</a> -->
              <ul class="nav">
              <li><a href="landing.html">Log Out</a></li>
            </ul>
            </form>
          </div><!--/.nav-collapse -->
        </div>
      </div>
    </div>
  <div class="container">
    <div class="row">
        <div class="span10 offset1">
          <div class="row"><h3>Fridgit Inventory for {{ user }}</h3></div>
          <table class="table table-hover" id="food_table">
        <thead>
              <th></th>
              <th>Item</th>
              <th>Quantity</th>
              <th>Purchase date</th>
              <th></th>
          </thead>
          <tbody>
            <tr>
              <td></td>
              <td><input type="text" placeholder="New item" id="new_item_name"></input></td>
              <td><input type="text" placeholder="Quantity" id="new_item_quant"></input></td>
              <td><input type="text" placeholder="Date purchased" id="new_item_date"></input></td>
              <td><a href="#" class="btn btn-success" id="addnew" onclick="populate_new()" style="width:30px">Add</a></td>
            </tr>
              <tr>
                <td><input type="checkbox" id="ch1" class="recipe_list"></td>
                <td class="item">Eggs</td>
                <td>1 dozen</td>
                <td>01/20/14</td>
                <td><a href="#" class="btn btn-small" id="delete">Delete</a></td>
              </tr>
              <tr>
                <td><input type="checkbox" id="ch2" class="recipe_list"></td>
                <td class="item">Milk</td>
                <td>1 gallon</td>
                <td>01/20/14</td>
                <td><a href="#" class="btn btn-small" id="delete">Delete</a></td>
              </tr>
        </tbody>
      </table>

      <div class="row" align="center">
        
        <a href="recipes.html" type="submit" value="Find recipes!" class="btn btn-danger" id="get_recipe">Find recipes!</a>
      
      </div>
    </div>
    </div>
    </div>


         <script type="text/javascript">
           $(document).ready(function(){
             $("#get_recipe").click(function() {
               var ingredients = new Array();
               $('tr .recipe_list').each(function() {
                   if(this.checked) {
                       var td = $(this).parent().parent().html();
                       var nextd = $(td).next().html();
                       ingredients.push(nextd);
                   }
               });
               if (ingredients.length > 5)
                 alert("Sorry, please limit your selection to 5 items!");
               else {
                 var url = '/recipes';
                 //$.post(url, { ingredients: ingredients, csrfmiddlewaretoken: csrftoken });
                 //make post request here
               }

             });            
           });
         </script>

        <script type="text/javascript">
        $(document).ready(function(){
          $('#food_table').on('click', '#delete', function(){
              $(this).closest ('tr').remove();
          });
        });
        </script>
        <script type="text/javascript">
          function populate_new() {
            var table = document.getElementById("food_table");
            var n = document.getElementById("new_item_name").value;
            var q = document.getElementById("new_item_quant").value;
            var d = document.getElementById("new_item_date").value;

            if(n=='') {
              alert("Sorry, please enter a name for your item.");
              exit();
            }
            if(q=='') {
              alert("Sorry, please enter a quantity for your item.");
              exit();
            }
            if(d=='') {
              alert("Sorry, please enter a date of purchase for your item.");
              exit();
            }
            
              var row = table.insertRow(2);
              var cell1 = row.insertCell(0);
              var cell2 = row.insertCell(1);
              var cell3 = row.insertCell(2);
              var cell4 = row.insertCell(3);
              var cell5 = row.insertCell(4);
              cell1.innerHTML = "<input type=\"checkbox\" id=\"recipe_list\" class=\"recipe_list\">";
              cell2.innerHTML = n;
              cell3.innerHTML = q;
              cell4.innerHTML = d;
              cell5.innerHTML = "<a href=\"#\" class=\"btn btn-small\" id=\"delete\">Delete</a>";
            
          }
        </script>
</body>
</html>
